# Run in Starndad sql
CREATE OR REPLACE FUNCTION
ccp.bq_corrective
 (message string)
 RETURNS int64
AS (
# Model language based on commit: d32ccba
# Corrective
# Corrective : build_bug_fix_regex()
(LENGTH(REGEXP_REPLACE(lower(message),'(((\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|)((choose|take|set|use)\\s*(the|a)?\\s*correct|(not|isn\'t|doesn\'t)\\s+work(s|ing)?|doesn\'t recognize|caused a regression|bad initialization(s)?|buffer overflow(s)?|bug(s|z)?|bug(-| )?fix(es)?|(break|broke|breaking|broken)[\\s\\S]{0,20}(code|system|function|method)|crash(ing|s|ed)?|correct(ing|s|ed)?\\s*(a|the|some|few|this)|correct(ed|ion|ly|s)?|dangling pointer(s)?|deadlock(s)?|defect(s)?|double(-| )free|error(s)?|fail(ing|s|ed)?|failur(ing|e|es|ed)|fault(s)?|faulty initialization(s)?|fix(ed|es|ing)?|fix(-| )?in(s)?|fixing(s)?|fix(-| )?up(s)?|flaw(s|ed)?|heap overflow(s)?|incorrect(ly)?|(im|im-)?propermemory(-| )?leak(s)?|missing\\s(default value|initialization|switch case)(s)?|add(ing|s|ed)?\\smiss(ing|es|ed)?|mistake(s|n|nly)?|null pointer(s)?|over(-| )?run(s)?|patch(ed|ing)|problem(s)?|race condition(s)?|data race(s)?|repair(ing|s|ed)?|resource leak(s)?|leak(s)?|revert(ing|s|ed)?|segmentation fault(s)?|resolv(ing|e|es|ed)|workaround(s)?|wrong(nly)?|trouble(s)?|vulnerabilit(y|ies))(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|))|((^|^[\\s\\S]{0,25}(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|))(correct(ing|s|ed)|fix(ed|s|es|ing)?|repair(ing|s|ed)?|revert(ing|s|ed)?|resolv(ing|e|es|ed)|miss(ing|es|ed)?|should|must|(have|has) to|avoid|prevent)(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|)))', '@'))-LENGTH(REGEXP_REPLACE(lower(message),'(((\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|)((choose|take|set|use)\\s*(the|a)?\\s*correct|(not|isn\'t|doesn\'t)\\s+work(s|ing)?|doesn\'t recognize|caused a regression|bad initialization(s)?|buffer overflow(s)?|bug(s|z)?|bug(-| )?fix(es)?|(break|broke|breaking|broken)[\\s\\S]{0,20}(code|system|function|method)|crash(ing|s|ed)?|correct(ing|s|ed)?\\s*(a|the|some|few|this)|correct(ed|ion|ly|s)?|dangling pointer(s)?|deadlock(s)?|defect(s)?|double(-| )free|error(s)?|fail(ing|s|ed)?|failur(ing|e|es|ed)|fault(s)?|faulty initialization(s)?|fix(ed|es|ing)?|fix(-| )?in(s)?|fixing(s)?|fix(-| )?up(s)?|flaw(s|ed)?|heap overflow(s)?|incorrect(ly)?|(im|im-)?propermemory(-| )?leak(s)?|missing\\s(default value|initialization|switch case)(s)?|add(ing|s|ed)?\\smiss(ing|es|ed)?|mistake(s|n|nly)?|null pointer(s)?|over(-| )?run(s)?|patch(ed|ing)|problem(s)?|race condition(s)?|data race(s)?|repair(ing|s|ed)?|resource leak(s)?|leak(s)?|revert(ing|s|ed)?|segmentation fault(s)?|resolv(ing|e|es|ed)|workaround(s)?|wrong(nly)?|trouble(s)?|vulnerabilit(y|ies))(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|))|((^|^[\\s\\S]{0,25}(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|))(correct(ing|s|ed)|fix(ed|s|es|ing)?|repair(ing|s|ed)?|revert(ing|s|ed)?|resolv(ing|e|es|ed)|miss(ing|es|ed)?|should|must|(have|has) to|avoid|prevent)(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|)))', '')))
 -
# Corrective : build_valid_find_regex()
(LENGTH(REGEXP_REPLACE(lower(message),'(((\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|)(correct(ing|s|ed)|fix(ed|s|es|ing)?|repair(ing|s|ed)?|revert(ing|s|ed)?|resolv(ing|e|es|ed))[\\s\\S]{1,40}(change( |-)?log|comment(s)?|copy( |-)?right(s)?|doc(s)?|documentation|explanation(s)?|man( |-)?page(s)?|manual|note(s)?|readme(.md)?|translation(s)?|java( |-)?doc(s)?|java( |-)?documentation|example(s)?|diagram(s)?|guide(s)?|icon(s)?|doc( |-)?string(s)?|tutorials(s)?|help|man|doc( |-)?string(s)?|desc(ription)?(s)?|copy( |-)?right(s)?|explanation(s)?|release notes|indentation(s)?|style|todo(s)?|typo(s)?|verbosity|#|(camel|snake|kebab|flat|lower|upper)\\s*case|code review(\'s|s)?|comment(s)?|cosmetic(s)?|cr(s)?(-)?|documentation(s)?|format(s|ing)?|help|remark(s)?|space(s)?|style|styling|typo(s)?|typing( |-)?(error|mistake)(s)?|warning(s)?|white( |-)?space(s)?)(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|))|((change( |-)?log|comment(s)?|copy( |-)?right(s)?|doc(s)?|documentation|explanation(s)?|man( |-)?page(s)?|manual|note(s)?|readme(.md)?|translation(s)?|java( |-)?doc(s)?|java( |-)?documentation|example(s)?|diagram(s)?|guide(s)?|icon(s)?|doc( |-)?string(s)?|tutorials(s)?|help|man|doc( |-)?string(s)?|desc(ription)?(s)?|copy( |-)?right(s)?|explanation(s)?|release notes|indentation(s)?|style|todo(s)?|typo(s)?|verbosity|#|(camel|snake|kebab|flat|lower|upper)\\s*case|code review(\'s|s)?|comment(s)?|cosmetic(s)?|cr(s)?(-)?|documentation(s)?|format(s|ing)?|help|remark(s)?|space(s)?|style|styling|typo(s)?|typing( |-)?(error|mistake)(s)?|warning(s)?|white( |-)?space(s)?)(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|)[\\s\\S]{0,40}(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|)(correct(ing|s|ed)|fix(ed|s|es|ing)?|repair(ing|s|ed)?|revert(ing|s|ed)?|resolv(ing|e|es|ed))(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|))|((error( |-)?check(ing)?|error( |-)?handling|error message(s)?|error report(s|ing)?|exception( |-)?handling|fixed( |-)?point|fix(ed) ticket(s)?|(fix(ed)?|bug)( )?( |-|:)( )?\\d+|(if|would)[\\s\\S]{0,40}go wrong)))', '@'))-LENGTH(REGEXP_REPLACE(lower(message),'(((\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|)(correct(ing|s|ed)|fix(ed|s|es|ing)?|repair(ing|s|ed)?|revert(ing|s|ed)?|resolv(ing|e|es|ed))[\\s\\S]{1,40}(change( |-)?log|comment(s)?|copy( |-)?right(s)?|doc(s)?|documentation|explanation(s)?|man( |-)?page(s)?|manual|note(s)?|readme(.md)?|translation(s)?|java( |-)?doc(s)?|java( |-)?documentation|example(s)?|diagram(s)?|guide(s)?|icon(s)?|doc( |-)?string(s)?|tutorials(s)?|help|man|doc( |-)?string(s)?|desc(ription)?(s)?|copy( |-)?right(s)?|explanation(s)?|release notes|indentation(s)?|style|todo(s)?|typo(s)?|verbosity|#|(camel|snake|kebab|flat|lower|upper)\\s*case|code review(\'s|s)?|comment(s)?|cosmetic(s)?|cr(s)?(-)?|documentation(s)?|format(s|ing)?|help|remark(s)?|space(s)?|style|styling|typo(s)?|typing( |-)?(error|mistake)(s)?|warning(s)?|white( |-)?space(s)?)(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|))|((change( |-)?log|comment(s)?|copy( |-)?right(s)?|doc(s)?|documentation|explanation(s)?|man( |-)?page(s)?|manual|note(s)?|readme(.md)?|translation(s)?|java( |-)?doc(s)?|java( |-)?documentation|example(s)?|diagram(s)?|guide(s)?|icon(s)?|doc( |-)?string(s)?|tutorials(s)?|help|man|doc( |-)?string(s)?|desc(ription)?(s)?|copy( |-)?right(s)?|explanation(s)?|release notes|indentation(s)?|style|todo(s)?|typo(s)?|verbosity|#|(camel|snake|kebab|flat|lower|upper)\\s*case|code review(\'s|s)?|comment(s)?|cosmetic(s)?|cr(s)?(-)?|documentation(s)?|format(s|ing)?|help|remark(s)?|space(s)?|style|styling|typo(s)?|typing( |-)?(error|mistake)(s)?|warning(s)?|white( |-)?space(s)?)(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|)[\\s\\S]{0,40}(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|)(correct(ing|s|ed)|fix(ed|s|es|ing)?|repair(ing|s|ed)?|revert(ing|s|ed)?|resolv(ing|e|es|ed))(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|))|((error( |-)?check(ing)?|error( |-)?handling|error message(s)?|error report(s|ing)?|exception( |-)?handling|fixed( |-)?point|fix(ed) ticket(s)?|(fix(ed)?|bug)( )?( |-|:)( )?\\d+|(if|would)[\\s\\S]{0,40}go wrong)))', '')))
 -
# Corrective : build_negeted_bug_fix_regex()
(LENGTH(REGEXP_REPLACE(lower(message),'(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|)(aren\'t|didn\'t|don\'t|doesn\'t|isn\'t|lack|n\'t|never|no|nobody|none|not|nothing|weren\'t|without|won\'t)(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|)[\\s\\S]{0,20}(((\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|)((choose|take|set|use)\\s*(the|a)?\\s*correct|(not|isn\'t|doesn\'t)\\s+work(s|ing)?|doesn\'t recognize|caused a regression|bad initialization(s)?|buffer overflow(s)?|bug(s|z)?|bug(-| )?fix(es)?|(break|broke|breaking|broken)[\\s\\S]{0,20}(code|system|function|method)|crash(ing|s|ed)?|correct(ing|s|ed)?\\s*(a|the|some|few|this)|correct(ed|ion|ly|s)?|dangling pointer(s)?|deadlock(s)?|defect(s)?|double(-| )free|error(s)?|fail(ing|s|ed)?|failur(ing|e|es|ed)|fault(s)?|faulty initialization(s)?|fix(ed|es|ing)?|fix(-| )?in(s)?|fixing(s)?|fix(-| )?up(s)?|flaw(s|ed)?|heap overflow(s)?|incorrect(ly)?|(im|im-)?propermemory(-| )?leak(s)?|missing\\s(default value|initialization|switch case)(s)?|add(ing|s|ed)?\\smiss(ing|es|ed)?|mistake(s|n|nly)?|null pointer(s)?|over(-| )?run(s)?|patch(ed|ing)|problem(s)?|race condition(s)?|data race(s)?|repair(ing|s|ed)?|resource leak(s)?|leak(s)?|revert(ing|s|ed)?|segmentation fault(s)?|resolv(ing|e|es|ed)|workaround(s)?|wrong(nly)?|trouble(s)?|vulnerabilit(y|ies))(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|))|((^|^[\\s\\S]{0,25}(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|))(correct(ing|s|ed)|fix(ed|s|es|ing)?|repair(ing|s|ed)?|revert(ing|s|ed)?|resolv(ing|e|es|ed)|miss(ing|es|ed)?|should|must|(have|has) to|avoid|prevent)(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|)))', '@'))-LENGTH(REGEXP_REPLACE(lower(message),'(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|)(aren\'t|didn\'t|don\'t|doesn\'t|isn\'t|lack|n\'t|never|no|nobody|none|not|nothing|weren\'t|without|won\'t)(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|)[\\s\\S]{0,20}(((\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|)((choose|take|set|use)\\s*(the|a)?\\s*correct|(not|isn\'t|doesn\'t)\\s+work(s|ing)?|doesn\'t recognize|caused a regression|bad initialization(s)?|buffer overflow(s)?|bug(s|z)?|bug(-| )?fix(es)?|(break|broke|breaking|broken)[\\s\\S]{0,20}(code|system|function|method)|crash(ing|s|ed)?|correct(ing|s|ed)?\\s*(a|the|some|few|this)|correct(ed|ion|ly|s)?|dangling pointer(s)?|deadlock(s)?|defect(s)?|double(-| )free|error(s)?|fail(ing|s|ed)?|failur(ing|e|es|ed)|fault(s)?|faulty initialization(s)?|fix(ed|es|ing)?|fix(-| )?in(s)?|fixing(s)?|fix(-| )?up(s)?|flaw(s|ed)?|heap overflow(s)?|incorrect(ly)?|(im|im-)?propermemory(-| )?leak(s)?|missing\\s(default value|initialization|switch case)(s)?|add(ing|s|ed)?\\smiss(ing|es|ed)?|mistake(s|n|nly)?|null pointer(s)?|over(-| )?run(s)?|patch(ed|ing)|problem(s)?|race condition(s)?|data race(s)?|repair(ing|s|ed)?|resource leak(s)?|leak(s)?|revert(ing|s|ed)?|segmentation fault(s)?|resolv(ing|e|es|ed)|workaround(s)?|wrong(nly)?|trouble(s)?|vulnerabilit(y|ies))(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|))|((^|^[\\s\\S]{0,25}(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|))(correct(ing|s|ed)|fix(ed|s|es|ing)?|repair(ing|s|ed)?|revert(ing|s|ed)?|resolv(ing|e|es|ed)|miss(ing|es|ed)?|should|must|(have|has) to|avoid|prevent)(\\s|\\.|\\?|\\!|\\[|\\]|\\(|\\)|\\:|^|$|\\,|\'|"|/|#|\\$|\\%|&|\\*|\\+|=|`|;|<|>|@|~|{|}|\\|)))', '')))
#Corrective - end
 )
